<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Hacky-Helper: Tabs</title>
  </head>
  <body>
    <header>
      <h1>H-H: Tabs</h1>

      <div class="search-section">
        <search-bar id="searchBar" class="header-search-bar"></search-bar>
        <div id="searchResults" class="search-results" style="display: none">
          <!-- Search results will be populated here -->
        </div>
      </div>

      <button id="requestTabSummariesButton">Request Tab Summaries</button>
      <button id="categorizeTabsButton">Auto-Categorize Tabs</button>
      <!-- TODO: Show the Session Name for already-named session window -->
      <input
        id="namedSessionInput"
        type="text"
        placeholder="Enter session name"
      />
      <button id="createNamedSessionButton">Create Named Session</button>

      <div class="settings">
        <a href="settings.html" target="_blank">‚öôÔ∏è settings</a>
      </div>
    </header>

    <content>
      <div id="sessions">
        <div id="named_sessions">
          <h3>Named Sessions</h3>
          <ul>
            <!-- Named sessions will be populated here -->
            <li>Loading named sessions...</li>
          </ul>
        </div>
        <div id="tabs_sessions">
          <h3>Windows</h3>
          <ul>
            <!-- Windows sessions will be populated here -->
            <li>Loading windows...</li>
          </ul>
        </div>
        <div id="closed_sessions">
          <h3>Closed Named Sessions</h3>
          <ul>
            <!-- Closed named sessions will be populated here -->
            <li>Loading closed sessions...</li>
          </ul>
        </div>
      </div>

      <div id="tabs_tablist">
        <!-- TODO: Show Session Name here! -->
        <div id="session_metadata" class="metadata-note">
          <!-- Session metadata will be displayed here -->
        </div>
        <h3>Tabs</h3>
        <div class="instructions">
          Select a window from the left to view its tabs
        </div>
        <div id="tabs_container">
          <div id="multi_tabs_action_container">
            <button
              id="migrateSelectedButton"
              class="action-button"
              title="Migrate selected tabs to another window"
            >
              Migrate Selected Tabs
            </button>
          </div>
          <table border="1">
            <thead>
              <tr>
                <th>Tab ID</th>
                <th>Title</th>
                <th>URL</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td colspan="3">Select a window to view tabs</td>
              </tr>
            </tbody>
          </table>
        </div>
        <div id="synced_tabs">
          <h3>Synced Tabs from Other Devices</h3>
          <div class="instructions">
            Select a session to view tabs from other devices
          </div>
          <div class="synced-tabs-actions-header">
            <button
              id="openAllSyncedTabsButton"
              class="action-button"
              title="Open all tabs that aren't already open"
            >
              Open All
            </button>
          </div>
          <ul>
            <!-- Synced tabs will be populated here -->
            <li>No synced tabs found</li>
          </ul>
        </div>
        <div id="saved_bookmarks" class="collapsed">
          <div class="bookmark-header">
            <h3>Saved Bookmarks</h3>
            <button
              id="toggleBookmarksButton"
              class="toggle-button"
              title="Toggle bookmarks panel"
            >
              üîñ
            </button>
          </div>
          <div class="instructions">
            Select a session to view saved bookmarks
          </div>
          <div class="bookmark-actions-header">
            <button
              id="openAllBookmarksButton"
              class="action-button"
              title="Open all bookmarks that aren't already open"
            >
              Open All
            </button>
          </div>
          <ul>
            <!-- Saved bookmarks will be populated here -->
            <li>No bookmarks saved yet</li>
          </ul>
        </div>
      </div>
    </content>

    <!-- Tab Migration Dialog -->
    <div id="migrationDialog" class="dialog-overlay" style="display: none">
      <div class="dialog-content">
        <h3>Migrate Tab to Another Window</h3>
        <div id="migrationTabInfo"></div>
        <div class="dialog-section">
          <h4>Suggested Destinations</h4>
          <div id="suggestedDestinations">
            <p>Loading suggestions...</p>
          </div>
        </div>
        <div class="dialog-section">
          <h4>All Windows</h4>
          <div id="allDestinations">
            <p>Loading windows...</p>
          </div>
        </div>
        <div class="dialog-buttons">
          <button id="cancelMigrationButton">Cancel</button>
        </div>
      </div>
    </div>

    <!-- Tab Categories Dialog -->
    <div id="categoriesDialog" class="dialog-overlay" style="display: none">
      <div class="dialog-content">
        <h3>Tab Categories</h3>
        <div id="categoriesList">
          <p>Analyzing tabs...</p>
        </div>
        <div class="dialog-buttons">
          <button id="closeCategoriesButton">Close</button>
        </div>
      </div>
    </div>

    <script type="module" src="/src/tabs.ts"></script>
  </body>
</html>
